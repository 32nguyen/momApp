<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="utf-8" />
    <title>Babylon - Getting Started</title>
    <!--- link to the last version of babylon --->
    <script src="babylon.js"></script>
    <script src="babylon.glTFFileLoader.js"></script>
    <script src="babylon.inspector.bundle.js"></script>
    <style>
        html, body {
            overflow: hidden;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }

        #renderCanvas {
            width: 100%;
            height: 100%;
            touch-action: none;
        }
    </style>
</head>
<body>
    <canvas id="renderCanvas"></canvas>
    <script>
        window.addEventListener('DOMContentLoaded', function () {
            // get the canvas DOM element
            var canvas = document.getElementById('renderCanvas');

            // load the 3D engine
            var engine = new BABYLON.Engine(canvas, true);

            // createScene function that creates and return the scene
            var createScene = function () {
                // create a basic BJS Scene object
                var scene = new BABYLON.Scene(engine);

                // create a FreeCamera, and set its position to (x:0, y:5, z:-10)
                var camera = new BABYLON.FreeCamera('camera', new BABYLON.Vector3(0, 0, 0), scene);
                // This attaches the camera to the canvas
                camera.attachControl(canvas, true);

                // Async call
                BABYLON.SceneLoader.Append("scenes/fantasy_sky_background/", "scene.gltf", scene, function () {
                    var light = new BABYLON.HemisphericLight("light1", new BABYLON.Vector3(0, 1, 0), scene);

                    // Background music
                    var musicSupper = new BABYLON.Sound("Music", "sounds/CanonInD-BrianCrain.mp3", scene, null, { loop: true, autoplay: true });

                    // Create logo plane for image
                    var planeLogo = BABYLON.MeshBuilder.CreatePlane("logo", { width: 1.0, height: 1.0 }, scene);
                    var planMaterialLogo = new BABYLON.StandardMaterial("LogoTexture", scene);
                    planMaterialLogo.diffuseTexture = new BABYLON.Texture("images/MoMLogo.JPG", scene);
                    planMaterialLogo.backFaceCulling = false;
                    planeLogo.material = planMaterialLogo;
                    planeLogo.position.x = 0;
                    planeLogo.position.y = 2;
                    planeLogo.position.z = 7;

                    // Baby Images options
                    // Create plane for image
                    var planeSupper = BABYLON.MeshBuilder.CreatePlane("Im", { width: 4.0, height: 2 }, scene);
                    var planMaterialSupper = new BABYLON.StandardMaterial("SupperTexture", scene);
                    planMaterialSupper.diffuseTexture = new BABYLON.Texture("images/im1.png", scene);
                    planMaterialSupper.backFaceCulling = false;
                    planeSupper.material = planMaterialSupper;
                    planeSupper.position.x = 0;
                    planeSupper.position.y = 0;
                    planeSupper.position.z = 7;

                    // Load the sound and play it automatically once ready
                    musicSupper.attachToMesh(planeSupper);
                    planeSupper.actionManager = new BABYLON.ActionManager(scene);
                    planeSupper.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPickDownTrigger, function (ev) {
                        if (musicSupper.isPlaying) {
                            musicSupper.stop();
                        }
                        else {
                            musicSupper.play();
                        }
                    }));

                    // Create plane for image 1
                    var planeIm1 = BABYLON.MeshBuilder.CreatePlane("Im1", { width: 3.0, height: 1.5 }, scene);
                    var planMaterialIm1 = new BABYLON.StandardMaterial("SIm1Texture", scene);
                    planMaterialIm1.diffuseTexture = new BABYLON.Texture("images/im2.jpg", scene);
                    planMaterialIm1.backFaceCulling = false;
                    planeIm1.material = planMaterialIm1;
                    planeIm1.position.x = 4;
                    planeIm1.position.y = 0;
                    planeIm1.position.z = 7;

                    // Load the sound and play it automatically once ready
                    var musicIm1 = new BABYLON.Sound("The_Last_Supper", "sounds/KissTheRain-Yiruma-75858.mp3", scene, null, { maxDistance: 12 });
                    musicIm1.attachToMesh(planeIm1);
                    planeIm1.actionManager = new BABYLON.ActionManager(scene);
                    planeIm1.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPickDownTrigger, function (ev) {
                        if (musicIm1.isPlaying) {
                            musicIm1.stop();
                        }
                        else {
                            musicIm1.play();
                        }
                    }));

                    // Create plane for image 2
                    var planeIm2 = BABYLON.MeshBuilder.CreatePlane("Im2", { width: 3.0, height: 1.5 }, scene);
                    var planMaterialIm2 = new BABYLON.StandardMaterial("Im2Texture", scene);
                    planMaterialIm2.diffuseTexture = new BABYLON.Texture("images/im2.jpg", scene);
                    planMaterialIm2.backFaceCulling = false;
                    planeIm2.material = planMaterialIm2;
                    planeIm2.position.x = 4;
                    planeIm2.position.y = 0;
                    planeIm2.position.z = 7;

                    // Load the sound and play it automatically once ready
                    var musicIm1 = new BABYLON.Sound("KTR", "sounds/KissTheRain-Yiruma-75858.mp3", scene, null, { maxDistance: 12 });
                    musicIm1.attachToMesh(planeIm1);
                    planeIm1.actionManager = new BABYLON.ActionManager(scene);
                    planeIm1.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPickDownTrigger, function (ev) {
                        if (musicIm1.isPlaying) {
                            musicIm1.stop();
                        }
                        else {
                            musicIm1.play();
                        }
                    }));

                    // Create plane for image 3
                    var planeIm3 = BABYLON.MeshBuilder.CreatePlane("Im3", { width: 3.0, height: 1.5 }, scene);
                    var planMaterialIm3 = new BABYLON.StandardMaterial("Im3Texture", scene);
                    planMaterialIm3.diffuseTexture = new BABYLON.Texture("images/im3.jpg", scene);
                    planMaterialIm3.backFaceCulling = false;
                    planeIm3.material = planMaterialIm3;
                    planeIm3.position.x = -4;
                    planeIm3.position.y = 0;
                    planeIm3.position.z = 7;

                    // Load the sound and play it automatically once ready
                    var musicIm3 = new BABYLON.Sound("KTR", "sounds/RiverFlowsInYouFRAMEVersion-Yiruma-5260584.mp3", scene, null, { maxDistance: 12 });
                    musicIm3.attachToMesh(planeIm1);
                    planeIm3.actionManager = new BABYLON.ActionManager(scene);
                    planeIm3.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPickDownTrigger, function (ev) {
                        if (musicIm3.isPlaying) {
                            musicIm3.stop();
                        }
                        else {
                            musicIm3.play();
                        }
                    }));

                    // Create plane for image 4
                    var planeIm4 = BABYLON.MeshBuilder.CreatePlane("Im4", { width: 3.0, height: 1.5 }, scene);
                    var planMaterialIm4 = new BABYLON.StandardMaterial("Im4Texture", scene);
                    planMaterialIm4.diffuseTexture = new BABYLON.Texture("images/im4.jpg", scene);
                    planMaterialIm4.backFaceCulling = false;
                    planeIm4.material = planMaterialIm4;
                    planeIm4.position.x = -7;
                    planeIm4.position.y = 0;
                    planeIm4.position.z = 5;
                    planeIm4.rotation.y = 3 * Math.PI / 2;

                    // Create plane for image 5
                    var planeIm5 = BABYLON.MeshBuilder.CreatePlane("Im5", { width: 3.0, height: 1.5 }, scene);
                    var planMaterialIm5 = new BABYLON.StandardMaterial("Im5Texture", scene);
                    planMaterialIm5.diffuseTexture = new BABYLON.Texture("images/im5.jpg", scene);
                    planMaterialIm5.backFaceCulling = false;
                    planeIm5.material = planMaterialIm5;
                    planeIm5.position.x = -7;
                    planeIm5.position.y = 0;
                    planeIm5.position.z = 0;
                    planeIm5.rotation.y = 3 * Math.PI / 2;

                    // Create plane for image 6
                    var planeIm6 = BABYLON.MeshBuilder.CreatePlane("Im6", { width: 3.0, height: 1.5 }, scene);
                    var planMaterialIm6 = new BABYLON.StandardMaterial("Im6Texture", scene);
                    planMaterialIm6.diffuseTexture = new BABYLON.Texture("images/im6.jpg", scene);
                    planMaterialIm6.backFaceCulling = false;
                    planeIm6.material = planMaterialIm6;
                    planeIm6.position.x = 7;
                    planeIm6.position.y = 0;
                    planeIm6.position.z = 4;
                    planeIm6.rotation.y = 3 * Math.PI / 2;

                    // Initialize VR
                    var VRHelper = scene.createDefaultVRExperience();
                    // Interation and teleportation
                    VRHelper.enableTeleportation({ floorMeshName: "Object001_Material__25__background_JPG_002_0" });            
                    scene.debugLayer.show();
                    });
                // return the created scene
                return scene;  
            }

            // call the createScene function
            var scene = createScene();

            // run the render loop
            engine.runRenderLoop(function () {
                scene.render();
            });

            // the canvas/window resize event handler
            window.addEventListener('resize', function () {
                engine.resize();
            });
        });
    </script>
</body>
</html>